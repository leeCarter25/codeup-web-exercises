<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Weather Map</title>
    <link rel="stylesheet" href="../css/weather_map.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">


    <script src='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css' rel='stylesheet' />
    <script src="../js/keys.js"></script>




</head>
<body>
<div class="jumbotron" style="margin-bottom:0px; color:white; background-color: rgba(0, 0, 255, 0.78);">
    <h2 class="text-left" style="font-size:45px; font-weight:300;">Weather App</h2>
    <h6 style="font-size:20px; font-weight:100;">Current city: Dallas</h6>
</div>
<div>
    Place <input type="text" placeholder> <button type="button"
                                                  type="button" class="btn-primary"
                                                  style="--bs-btn-padding-y: .40rem; --bs-btn-padding-x: .75rem; --bs-btn-font-size: .75rem;">Find
</button>


</div>
<!-- <div class="container">
    <div class="current-info">
    <div class="date-container">
        <div class="date" id="date">
            2022-04-06
        </div>
        <div class="others" id="current-weather-items">
            <div class="temp">75.43째F / 75.43째F</div>
            <img src="http://openweathermap.org/img/wn/10d@2x.png" alt="weather icon" class="w-icon">
            <div class="weather-item">
                <p>Description: overcast clouds</p>
            </div>
            <div class="weather-item">
            <p>Humidity: 71</p>
        </div>
        <div class="weather-item">
            <p>Wind: 5.84</p>
        </div>
        <div class="weather-item">
            <p>Pressure: 1015</p>
        </div>
        </div>
    </div>
</div> -->


</div>
<div class="card" style="width: 18rem;">
    <div class="card-header">
        2022-04-06
    </div>
    <ul class="list-group list-group-flush" id="current-weather-items">
        <li class="temp">75.43째F / 75.43째F </li>
        <img src="http://openweathermap.org/img/wn/10d@2x.png" alt="weather icon" class="w-icon">
        <hr>
        <li class="weather-item">Humidity:</li>
        <hr>
        <li class="weather-item">Wind: 5.84</li>
        <hr>
        <li class="weather-item">Pressure: 1015</li>

    </ul>
</div>


<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<!-- <script>
//    $(document).ready(function() {});
   let map = new mapboxgl.Map({
    container: 'map',
    center: [-123.1121, 49.2569],
    zoom: 10,
    style:
    'mapbox://styles/mapbox/streets-v11',
    accessToken: 'pk.eyJ1IjoiY2FydGVyLWxlZSIsImEiOiJjbDd2MGNiNnMwNnlhM29tczNtbDVkdnJxIn0.YF4dGna5RU4YHiptKPyKFg'
}); -->
<!--
map.addControl(
    new mapboxgl.NavigationControl()); -->

<!-- </script> -->


<div id='map' style='width: 100%; height: 500px;'></div>
<script>
    // let map = new mapboxgl.Map({
    //     container: 'map',
    //     center: [-123.1121, 49.2569],
    //     zoom: 10,
    //     style:
    //     'mapbox://styles/mapbox/streets-v11',
    //     accessToken: 'pk.eyJ1IjoiY2FydGVyLWxlZSIsImEiOiJjbDd2MGNiNnMwNnlhM29tczNtbDVkdnJxIn0.YF4dGna5RU4YHiptKPyKFg'
    // });
    // map.addControl(
    //     new mapboxgl.NavigationControl());
    // TO MAKE THE MAP APPEAR YOU MUST
    //ADD YOUR ACCESS TOKEN FROM
    //https://account.mapbox.com
        mapboxgl.accessToken = MAPBOX_TOKEN;
    const map = new mapboxgl.Map({
        container: 'map', // container ID
        style: 'mapbox://styles/mapbox/streets-v11', // style URL
        center: [-96.808891, 32.779167], // starting position [lng, lat]
        zoom: 15, // starting zoom
        projection: 'globe' // display the map as a 3D globe

    });

    // Create a new marker.
    // const marker = new mapboxgl.Marker()
    //     .setLngLat([0.11, 51.49])
    //     .addTo(map);

    // Set marker options.
    const marker1 = new mapboxgl.Marker({
        color: "#55affa",
        draggable: true
    }).setLngLat([0.11, 51.49])
        .addTo(map);

    map.on('style.load', () => {
        map.setFog({}); // Set the default atmosphere style
    });

    function geocode(search, token) {
        var baseUrl = 'https://api.mapbox.com';
        var endPoint = '/geocoding/v5/mapbox.places/';
        return fetch(baseUrl + endPoint + encodeURIComponent(search) + '.json' + "?" + 'access_token=' + token)
            .then(function(res) {
                return res.json();
                // to get all the data from the request, comment out the following three lines...
            }).then(function(data) {
                return data.features[0].center;
            });
    }

    geocode('Whitefish, Montana', MAPBOX_TOKEN).then(function(data) {
        map.setCenter(data);
    })
    // let lng = 99;
    // let lat = 100;

    // function reverseGeocode(coordinates, token) {
    //     var baseUrl = 'https://api.mapbox.com';
    //     var endPoint = '/geocoding/v5/mapbox.places/';
    //     return fetch(baseUrl + endPoint + coordinates.lng + "," + coordinates.lat + '.json' + "?" + 'access_token=' + token)
    //         .then(function(res) {
    //             return res.json();
    //         })
            // to get all the data from the request, comment out the following three lines...
            // .then(function(data) {
            //     return data.features[0].place_name;
            // });
    // }

    // reverseGeocode({lng: lng, lat: lat}, MAPBOX_TOKEN).then(function (data) {
    //     console.log(data);
    // });



    // let html = "";
    // let tempVariable = '';
    // let humVariable = '';
    // let winVariable = '';
    // let presVariable = '';
    //
    // html = '<li id="weather-temp">' + tempVariable + '</li>\n' +
    //     '        <img src="http://openweathermap.org/img/wn/10d@2x.png" alt="weather icon" class="w-icon">\n' +
    //     '        <hr>\n' +
    //     '        <li id="weather-humidity">' + humVariable + '</li>\n' +
    //     '        <hr>\n' +
    //     '        <li id="weather-wind">' + winVariable + '</li>\n' +
    //     '        <hr>\n' +
    //     '        <li id="weather-pressure">' + presVariable + '</li>';
    //
    // <input type="text" name='city' id="city" class='form-control' placeholder="City Name">
    //     <button id="submit-weather" class='btn-primary'>Search City</button>
    //
    // $(document).ready(function () {
    //     $('#current-weather-items').click(function () {
    //         var city = $('')
    //     })
    // })
</script>
</body>
</html>